# -*- coding: utf-8 -*-
"""Covid 19 Dataset project.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/13awFaQ5zBxABFAr0QPlg8_4Lviy0TXd4
"""

from google.colab import drive
drive.mount('/content/drive')

import numpy as np
import pandas as pd
import seaborn as sns
import matplotlib.pyplot as plt
import time

path ='/content/drive/MyDrive/xyz/covid_19_dataset.csv'
df = pd.read_csv(path)
df

df.fillna(0,inplace=True)

df.isnull().sum()

print(df.columns)

sns.heatmap(df.isnull())

"""***Show the number of confirmed, deaths, recovered cases in each continent***"""

df.groupby('continent').sum()

sns.heatmap(df.corr())

locationwise = pd.pivot_table(df, values=['total_deaths', 'total_tests', 'reproduction_rate', 'icu_patients'], index='location', aggfunc=max)

locationwise['recovery_rate'] = locationwise['reproduction_rate']*100/locationwise['total_tests']

locationwise['mortality_rate'] = locationwise['total_deaths']*100/locationwise['total_tests']

locationwise = locationwise.sort_values(by='total_tests', ascending=False)

locationwise.style.background_gradient(cmap='cubehelix')

top_10_new_cases = df.groupby(by='location').max()[['new_cases', 'date']].sort_values(by=['new_cases'], ascending=False).reset_index()

fig = plt.figure(figsize=(16,9))

plt.title('Top 10 location with most new cases', size=25)

fig = plt.figure(figsize=(16,9))
plt.title('Top 10 location with most new cases', size=25)
ax = sns.barplot(data = top_10_new_cases.iloc[:10], y = 'new_cases', x = 'location', edgecolor = 'black')
plt.xlabel('LOCATION')
plt.ylabel('NEW CASES')
plt.show()

fig = plt.figure(figsize=(16,9))
plt.title('Top 5 affected location', size=25)
ax = sns.lineplot(data = df[df['location'].isin(['World','Europe', 'North America', 'United States', 'European Union'])], y = 'new_cases', x = 'date', hue = 'location')
plt.xlabel('DATE')
plt.ylabel('NEW CASES')
plt.show()